(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{20:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(0),c=n.n(r),o=n(3),s=n.n(o),i=(n(20),n(10)),l=n.n(i),u=n(11),h=n(12),d=n(4),j=n(5),m=n(7),b=n(6),f=n(8),p=(n(22),n(13)),g=n.n(p),v=(n(44),n(14)),O={value:""},x=function(e){Object(m.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={value:""},e.onImputChange=function(t){var n=t.target;e.setState({value:n.value})},e.onClickSubmiit=function(t){t.preventDefault();var n=e.state.value;if(""===n.trim())return f.b.error("Wrong request !");e.props.onSubmit(n),e.reset()},e.reset=function(){e.setState(Object(v.a)({},O))},e}return Object(j.a)(n,[{key:"render",value:function(){return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("header",{className:"Searchbar",children:Object(a.jsxs)("form",{className:"SearchForm",onSubmit:this.onClickSubmiit,children:[Object(a.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(a.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(a.jsx)("input",{className:"SearchForm-input",type:"text",placeholder:"Search images and photos",onChange:this.onImputChange,value:this.state.value})]})})})}}]),n}(r.Component);var w=function(e){var t=e.fetchArr,n=e.showModal,r=e.onClick;return t.map((function(e){return Object(a.jsx)("li",{className:"ImageGalleryItem",onClick:n,children:Object(a.jsx)("img",{"data-url":e.largeImageURL,src:e.webformatURL,alt:e.tags,className:"ImageGalleryItem-image",onClick:r})},e.id)}))};var k=function(e){var t=e.fetchArr,n=e.showModal,r=e.onClick;return Object(a.jsx)(a.Fragment,{children:t&&Object(a.jsx)("ul",{className:"ImageGallery ",children:Object(a.jsx)(w,{fetchArr:t,showModal:n,onClick:r})})})};var y=function(e){var t=e.onClick;return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("button",{type:"button",className:"Button",onClick:t,children:"Load more"})})},C=(n(45),document.querySelector("#modal-root")),S=function(e){Object(m.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).handleKeyDown=function(t){"Escape"===t.code&&e.props.onClose()},e.handleBackdropClick=function(t){t.currentTarget===t.target&&e.props.onClose()},e}return Object(j.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){return Object(o.createPortal)(Object(a.jsx)("div",{className:"Modal__backdrop",onClick:this.handleBackdropClick,children:Object(a.jsx)("div",{className:"Modal__content",children:this.props.children})}),C)}}]),n}(r.Component);var I=function(e){var t=e.imageSrc;return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("img",{src:t,alt:""})})},F="18984826-9a089bf93f102eeea865f0aeb",M="https://pixabay.com/api/?&image_type=photo&orientation=horizontal",N=function(e){Object(m.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={pictureInfo:"",fetchResponce:null,currentPage:1,showModal:!1,datasetUrl:"",loading:!1,error:!1},e.fetchImages=Object(h.a)(l.a.mark((function t(){var n,a,r,c,o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state,a=n.pictureInfo,r=n.currentPage,e.setState({loading:!0}),t.next=4,fetch("".concat(M,"&&key=").concat(F,"&q=").concat(a,"&page=").concat(r));case 4:return c=t.sent,t.next=7,c.json();case 7:0===(o=t.sent).hits.length&&e.setState({error:!0}),e.setState((function(e){var t=e.fetchResponce,n=e.currentPage;return{fetchResponce:[].concat(Object(u.a)(t),Object(u.a)(o.hits)),currentPage:n+1,loading:!1}})),e.scrollToNextPage();case 11:case"end":return t.stop()}}),t)}))),e.togleModal=function(){e.setState((function(e){return{showModal:!e.showModal}}))},e.modalImgHandler=function(t){var n=t.target.dataset.url;e.setState({datasetUrl:n})},e.handleSearchValue=function(t){e.state.pictureInfo!==t&&e.setState({pictureInfo:t,fetchResponce:[],currentPage:1,loading:!0})},e.scrollToNextPage=function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})},e}return Object(j.a)(n,[{key:"componentDidUpdate",value:function(e,t){var n=this.state.pictureInfo;t.pictureInfo!==n&&this.fetchImages()}},{key:"render",value:function(){var e=this.state,t=e.fetchResponce,n=e.showModal,r=e.datasetUrl,c=e.loading,o=e.error,s=e.pictureInfo;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(x,{onSubmit:this.handleSearchValue}),o&&Object(a.jsxs)("h1",{children:["\u041f\u043e \u0432\u0430\u0448\u0435\u043c\u0443 \u0437\u0430\u043f\u0440\u043e\u0441\u0443 ",Object(a.jsxs)("span",{className:"error",children:['"',s,'"']})," ","\u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043d\u043e, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u0437\u0430\u043f\u0440\u043e\u0441"]}),c&&Object(a.jsx)(g.a,{type:"Audio",color:"#00BFFF",height:80,width:80}),Object(a.jsx)(k,{showModal:this.togleModal,fetchArr:t,onClick:this.modalImgHandler}),t&&!o&&Object(a.jsx)(y,{onClick:this.fetchImages}),n&&Object(a.jsx)(S,{onClose:this.togleModal,children:Object(a.jsx)(I,{imageSrc:r})}),Object(a.jsx)(f.a,{position:"top-center",autoClose:3e3})]})}}]),n}(r.Component),P=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,49)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),c(e),o(e)}))};s.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(N,{})}),document.getElementById("root")),P()}},[[46,1,2]]]);
//# sourceMappingURL=main.ce4cd895.chunk.js.map